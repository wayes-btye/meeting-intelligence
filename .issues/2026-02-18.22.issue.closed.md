# [\#22 Issue](https://github.com/wayes-btye/meeting-intelligence/issues/22) `closed`: Fix audio upload — remove AssemblyAI references or implement transcription
**Labels**: `bug`, `critical`


#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) opened issue at [2026-02-18 22:23](https://github.com/wayes-btye/meeting-intelligence/issues/22):

The UI accepts audio files (mp3/wav/m4a) and displays an AssemblyAI message, but no transcription code exists. The ingest endpoint does `.decode("utf-8")` which crashes on binary files. The `assemblyai` package is a dependency but never imported.

**Options:**
1. Implement AssemblyAI transcription (medium effort)
2. Remove audio file types from UI, add clear error for non-text uploads, update README (small effort)

Either way, the current state of silently crashing is not acceptable.

**Affects:** `src/api/routes/ingest.py`, `src/ui/app.py`, `README.md`

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) commented at [2026-02-20 15:42](https://github.com/wayes-btye/meeting-intelligence/issues/22#issuecomment-3935664338):

## Manual testing — PR #36

### What was tested

**Text ingest (working)**
- `tests/fixtures/sample.vtt` ingested via `POST /api/ingest` → 200, 8 chunks
- 5 MeetingBank JSON transcripts loaded via `scripts/load_meetingbank.py` → 56 + 7 + 4 + 4 + 9 chunks
- RAG queries against loaded meetings returning correct answers with citations ✅

**Audio ingest (working)**
- Sample WAV from AssemblyAI docs (`gettysburg.wav`, 431 KB, Gettysburg Address speech) ingested via `POST /api/ingest` → 200, 14.8s, 1 chunk
- AssemblyAI transcription confirmed: "Four score and seven years ago..."
- Query against the transcribed audio returned correct answer ✅
- Fixed a secondary bug during testing: SDK 0.52.1 sends `speech_models=[]` by default, which the current AssemblyAI API rejects — fixed by passing `TranscriptionConfig(speech_models=["universal-3-pro"])` explicitly

### What was NOT tested (needs proper meeting audio)

The audio test above used a short single-speaker speech, not a real meeting recording. A proper test needs:
- A multi-speaker meeting audio file (MP3/WAV, ideally with diarization)
- Expected: `num_chunks > 1`, multiple speakers identified in chunks, RAG queries answer questions about the meeting content

### MeetingBank audio — status

`huuuyeah/MeetingBank_Audio` exists on HuggingFace but files are packed as city-level ZIP archives (2–4 GB each, 198 GB total). Individual meeting MP3s are not accessible without downloading and unzipping a multi-GB archive. The `download_meetingbank.py` script downloads the **transcript** dataset (`huuuyeah/meetingbank`), not the audio. A proper audio test requires either:
1. Manually downloading + unzipping one city archive from MeetingBank_Audio
2. Using a real meeting recording from another source

### Ready to merge?

Code changes are complete and all automated tests pass (111/111). Blocking on proper meeting audio test before merge.

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) commented at [2026-02-20 16:58](https://github.com/wayes-btye/meeting-intelligence/issues/22#issuecomment-3936034414):

## Manual testing update — real Denver City Council audio (MeetingBank_Audio)

### How to get individual audio files from MeetingBank_Audio

The HuggingFace dataset `huuuyeah/MeetingBank_Audio` stores MP3s inside city-level ZIP archives (smallest is Denver-21.zip at ~830 MB). To extract one file:

```python
from huggingface_hub import hf_hub_download
import zipfile, os

path = hf_hub_download(repo_id="huuuyeah/MeetingBank_Audio", filename="Denver/mp3/Denver-21.zip", repo_type="dataset", local_dir="data/tmp")
with zipfile.ZipFile(path) as zf:
    mp3s = sorted([(zf.getinfo(f).file_size, f) for f in zf.namelist() if f.endswith(".mp3")])
    zf.extract(mp3s[0][1], "data/meetingbank_audio/")  # extract smallest
os.remove(path)  # delete zip
```

### Test results with real meeting audio

**File:** `denver_fb8c74f8.mp3` (4.4 MB, Denver City Council, May 8 2017)
**Result:** `200 OK`, 25.7s, 2 chunks ingested

**Transcript sample (AssemblyAI output):**
> "Good evening. Welcome to the Denver City Council meeting of Monday, May 8th, 2017. My name is Kelly Velez. I'm your council secretary. According to our rules of procedure, when our council president Albus Brooks and council president pro tem Jolen Clark are both absent, the council secretary calls the meeting to order..."

Transcript is accurate. Full audio → AssemblyAI → chunk → embed → store pipeline confirmed working on a real meeting recording. ✅

### Known limitation: timeout on larger files

`denver_fa0a7425.mp3` (36.9 MB, ~30-40 min meeting) failed with `503 read operation timed out` after 62s. The AssemblyAI SDK's default polling timeout is too short for longer recordings. Fix: increase timeout in `TranscriptionConfig` or set `aai.settings.http_timeout`. Not blocking for this PR — can be addressed when longer recordings are needed.

### Speaker diarization

Chunks came back with `speaker=None` — speaker labels require `speaker_labels=True` in `TranscriptionConfig`. Not enabled in current implementation. Can be added as a follow-up.


-------------------------------------------------------------------------------



[Export of Github issue for [wayes-btye/meeting-intelligence](https://github.com/wayes-btye/meeting-intelligence). Generated on 2026.02.27 at 04:14:01.]
