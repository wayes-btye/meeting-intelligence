# [\#30 Issue](https://github.com/wayes-btye/meeting-intelligence/issues/30) `open`: fix: resolve 218 mypy type errors across src/

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) opened issue at [2026-02-19 22:48](https://github.com/wayes-btye/meeting-intelligence/issues/30):

## Summary

CI (introduced in #28) runs \`mypy src/\` and found **218 pre-existing type errors** across 15 files. Ruff passes cleanly — this is mypy only.

## Error Categories

**1. Claude API content block union-attr (~150 errors)**
Files: \`src/retrieval/generation.py\`, \`src/evaluation/metrics.py\`, \`src/evaluation/generate_test_set.py\`, \`src/evaluation/cross_check.py\`

Pattern: code accesses \`.text\` directly on \`response.content[0]\` without narrowing the type:
```python
# current (fails mypy — block could be ThinkingBlock, ToolUseBlock, etc.)
response.content[0].text

# fix — narrow with isinstance
from anthropic.types import TextBlock
block = response.content[0]
if isinstance(block, TextBlock):
    block.text
```

**2. Supabase JSON return type (~50 errors)**
Files: \`src/api/routes/meetings.py\`, \`src/ingestion/storage.py\`, \`src/retrieval/search.py\`, \`src/api/routes/extraction.py\`

Pattern: Supabase \`.data\` returns \`JSON\` (a broad union type), code indexes it with string keys directly. Needs cast or type narrowing after the query.

**3. Bare dict without type params (~15 errors)**
Files: various — \`dict\` should be \`dict[str, Any]\` or more specific.

**4. Misc (~3 errors)**
- \`src/api/main.py:21\` — missing return type annotation on a function
- \`src/ingestion/parsers.py:166\` — \`no-any-return\`
- \`src/extraction/extractor.py:128\` — \`call-overload\` mismatch on \`messages.create\`

## Acceptance Criteria
- \`mypy src/\` exits 0
- \`make lint\` passes fully
- No functional behaviour changes




-------------------------------------------------------------------------------



[Export of Github issue for [wayes-btye/meeting-intelligence](https://github.com/wayes-btye/meeting-intelligence). Generated on 2026.02.19 at 22:55:17.]
