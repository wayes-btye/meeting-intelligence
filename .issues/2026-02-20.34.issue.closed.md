# [\#34 Issue](https://github.com/wayes-btye/meeting-intelligence/issues/34) `closed`: feat: zip file upload for bulk ingestion + Microsoft Teams VTT format support

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) opened issue at [2026-02-20 00:28](https://github.com/wayes-btye/meeting-intelligence/issues/34):

## Goal

Two related improvements that make the system usable with real-world enterprise transcripts:

## Part 1: Zip File Upload

**Problem:** Assessors and users likely have folders of meeting transcripts. Currently they must upload files one at a time.

**Solution:** Accept `.zip` files in the ingest endpoint. Extract and ingest each `.vtt`/`.txt`/`.json` file inside as a separate meeting.

**Implementation:**
- Detect `content-type: application/zip` or `.zip` extension in `POST /ingest`
- Extract to temp directory, iterate files, call ingest pipeline per file
- Return a batch result: `{"meetings_ingested": 5, "meeting_ids": [...], "errors": [...]}`
- UI: show bulk upload progress (N of M processed)

## Part 2: Microsoft Teams VTT Format

**Problem:** Teams exports `.vtt` files using WebVTT with inline speaker tags:
```
WEBVTT

00:00:00.000 --> 00:00:05.000
<v John Smith>This is what John said.</v>
```

Our current VTT parser likely handles the timestamp blocks but does NOT parse `<v SpeakerName>` inline tags — speaker labels would be lost or appear as literal text in chunks.

**Solution:**
- Update `VTTParser` to detect and strip `<v SpeakerName>` tags, extracting speaker name from the tag
- Add test: `test_vtt_parser_teams_format()` with a real Teams-style fixture
- Add `tests/fixtures/teams_sample.vtt` as a minimal Teams VTT example

**Why it matters:** The assessor likely has Teams meeting transcripts. If they try uploading one and speaker attribution breaks, it reflects poorly. This is a quick fix that makes the demo robust to real-world input.

## Acceptance Criteria

**Zip upload:**
- **1.** Upload a `.zip` containing 3 `.vtt` files via `POST /ingest`
- **2.** 3 separate meetings created in Supabase
- **3.** Batch result returned with all 3 meeting IDs

**Teams format:**
- **1.** `tests/fixtures/teams_sample.vtt` exists with `<v SpeakerName>` tag format
- **2.** `test_vtt_parser_teams_format()` passes — speaker labels correctly extracted
- **3.** Chunks from a Teams VTT file have correct `speaker` field populated

## Related PRD items: F62, F63

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) commented at [2026-02-21 18:41](https://github.com/wayes-btye/meeting-intelligence/issues/34#issuecomment-3939226645):

Implementation complete on branch `feat/34-zip-teams-vtt`.

**Part 1 — Zip upload:**
- `POST /api/ingest` accepts .zip files; extracts each .vtt/.txt/.json and ingests as separate meetings
- Returns `{meetings_ingested, meeting_ids, errors}`
- Title pattern: `{zip_stem}/{filename_without_ext}`
- Non-transcript files (e.g. .pdf, .png) silently skipped; invalid zip returns 400
- New model: `BatchIngestResponse` in `src/api/models.py`
- Helper: `_ingest_zip()` in `src/api/routes/ingest.py`

**Part 2 — Teams VTT:**
- `parse_vtt()` in `src/ingestion/parsers.py` now detects `<v SpeakerName>` inline voice tags
- Extracts speaker name, strips tag (including optional `</v>` closing tag) from cue text
- Standard colon-style speaker labels unaffected
- Fixture: `tests/fixtures/teams_sample.vtt`

**Tests:**
- 6 new tests (2 zip API, 4 Teams VTT parser) — all TDD (written before implementation)
- Full suite: 121 passed, ruff clean, no new mypy errors

PR #58 open for review — worktree at `C:\meeting-intelligence-wt8-issue-34` intact for manual testing.


-------------------------------------------------------------------------------



[Export of Github issue for [wayes-btye/meeting-intelligence](https://github.com/wayes-btye/meeting-intelligence). Generated on 2026.02.26 at 04:18:23.]
