# [\#46 Issue](https://github.com/wayes-btye/meeting-intelligence/issues/46) `open`: feat: meeting visualisation — Gemini 2.5 Pro Mermaid diagram
**Labels**: `enhancement`, `ui`, `post-mvp`


#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) opened issue at [2026-02-21 01:44](https://github.com/wayes-btye/meeting-intelligence/issues/46):

## Feature

Add a **"Generate Visualisation"** button to the meeting detail view. On click, call Gemini 2.5 Pro to produce a Mermaid flowchart diagram showing speakers, topics, decisions, and action items as a structured visual.

This is a button-triggered action (not auto-run on ingest) since it consumes API tokens.

## Backend — new endpoint

`POST /api/meetings/{meeting_id}/visualisation`

\`\`\`python
import google.generativeai as genai
from src.config import settings

VISUALISATION_PROMPT = """You are an expert at creating clear, informative diagrams using Mermaid syntax.

Analyse this meeting transcript and extracted data, then create ONE comprehensive Mermaid flowchart that visualises:
- Key speakers and their contributions
- Main topics discussed
- Decisions made
- Action items and who owns them

STRICT RULES:
1. Use ONLY flowchart TD or flowchart LR syntax
2. Node IDs must be simple alphanumeric (e.g., A, B1, node1) — no spaces, no special chars
3. Labels in square brackets can have spaces: A["My Label Here"]
4. Keep labels SHORT (max 5 words per node)
5. Use subgraph with simple IDs: subgraph SG1["Group Name"]
6. Connect nodes one at a time: A --> B, then B --> C
7. Style nodes AFTER defining them: style A fill:#f9f,stroke:#333
8. Include 8-15 nodes for clarity
9. Use colours to differentiate:
   - Blue #bbdefb for speakers
   - Green #c8e6c9 for decisions
   - Orange #ffe0b2 for action items
   - Pink #ffcdd2 for key topics

CRITICAL: Output ONLY valid Mermaid code. No markdown fences, no backticks, no explanation.

Meeting data:
{transcript_and_extracted}

Output only the Mermaid code:"""

genai.configure(api_key=settings.gemini_api_key)
model = genai.GenerativeModel("gemini-2.5-pro")
response = model.generate_content(VISUALISATION_PROMPT.format(...))
\`\`\`

Returns `{ "meeting_id": "...", "mermaid_code": "flowchart TD\n..." }`.

Returns 501 if `GEMINI_API_KEY` not set (graceful degradation).

## Frontend

Install Mermaid renderer:
\`\`\`bash
cd frontend && npm install mermaid
\`\`\`

In the meeting detail panel, add a "Generate Visualisation" button. On success, render the Mermaid diagram inline using the `mermaid` library or a wrapper component.

## Notes
- `GEMINI_API_KEY` is already in `Settings` and `.env.example` — use `settings.gemini_api_key`
- Model: `gemini-2.5-pro` (latest as of Feb 2026)
- The Mermaid approach is confirmed to work well in the AI_Image_Playground project
- Prompt can be easily tweaked if the output format needs adjustment

## Test plan
- [ ] Returns 501 without `GEMINI_API_KEY` (same pattern as #35 visual summary)
- [ ] Returns valid Mermaid code with a real transcript
- [ ] Frontend renders diagram without errors
- [ ] `pytest tests/ -m "not expensive"` — all pass (mock Gemini in unit tests)

## Effort
Medium — new endpoint (similar to #35) + Mermaid renderer in frontend.




-------------------------------------------------------------------------------



[Export of Github issue for [wayes-btye/meeting-intelligence](https://github.com/wayes-btye/meeting-intelligence). Generated on 2026.02.28 at 03:55:48.]
