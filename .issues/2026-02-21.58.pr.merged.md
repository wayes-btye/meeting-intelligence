# [\#58 PR](https://github.com/wayes-btye/meeting-intelligence/pull/58) `merged`: feat: zip upload + Teams VTT format support (#34)

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) opened issue at [2026-02-21 18:41](https://github.com/wayes-btye/meeting-intelligence/pull/58):

Closes #34

## Part 1 — Zip bulk upload
`POST /api/ingest` now accepts `.zip` files. Each `.vtt`/`.txt`/`.json` inside is ingested as a separate meeting. Returns `{meetings_ingested, meeting_ids, errors}`. Title pattern: `{zip_stem}/{filename_without_ext}` (e.g. `batch_upload/council_jan`). Non-transcript files are silently skipped. Invalid zip → 400.

## Part 2 — Teams VTT speaker tags
`parse_vtt()` now detects and strips `<v SpeakerName>` inline voice tags (WebVTT voice span format used by Microsoft Teams exports). Speaker name is extracted from the tag; clean cue text is preserved. Standard colon-style labels (`Speaker 1: text`) are unaffected. Optional `</v>` closing tags are also stripped.

## Files changed
- `src/api/models.py` — added `BatchIngestResponse` model
- `src/api/routes/ingest.py` — zip detection + `_ingest_zip()` helper function
- `src/ingestion/parsers.py` — `parse_vtt()` updated with Teams voice tag regex
- `tests/test_api.py` — 2 new zip upload tests (mocked, no DB/embed calls)
- `tests/test_ingestion.py` — 4 new Teams VTT parser tests
- `tests/fixtures/teams_sample.vtt` — Teams format fixture

## Test plan
- `pytest tests/ -m "not expensive"` — 121 passed, 3 deselected
- `ruff check src/ tests/` — all checks passed
- `mypy src/` — no new errors introduced (pre-existing errors unchanged)

MANUAL TEST REQUIRED before merge:
- Upload a real zip of VTT files via the React UI and verify N meetings are created
- Upload a real Microsoft Teams `.vtt` export and verify speaker labels appear on chunks

#### <img src="https://avatars.githubusercontent.com/in/8329?v=4" width="50">[vercel](https://github.com/apps/vercel) commented at [2026-02-21 18:41](https://github.com/wayes-btye/meeting-intelligence/pull/58#issuecomment-3939226414):

[vc]: #Ckw9o2IXNmYno37XZAXMyBcRYKT9T7lZRgm1YG3WDEk=:eyJpc01vbm9yZXBvIjp0cnVlLCJ0eXBlIjoiZ2l0aHViIiwicHJvamVjdHMiOlt7Im5hbWUiOiJtZWV0aW5nLWludGVsbGlnZW5jZS13YyIsInByb2plY3RJZCI6InByal8yeVpsaThhOGFGYmdwR28xYXBHeTN6cFN3MzNrIiwiaW5zcGVjdG9yVXJsIjoiaHR0cHM6Ly92ZXJjZWwuY29tL3dheWVzLWJ0eWVzLXByb2plY3RzL21lZXRpbmctaW50ZWxsaWdlbmNlLXdjLzZ0YnVtZHBXMUJ2cHNLdU1WbjFTeHNNdExISmMiLCJwcmV2aWV3VXJsIjoibWVldGluZy1pbnRlbGxpZ2VuY2Utd2MtZ2l0LWZlYXQtMzQtYWJjYjFjLXdheWVzLWJ0eWVzLXByb2plY3RzLnZlcmNlbC5hcHAiLCJuZXh0Q29tbWl0U3RhdHVzIjoiREVQTE9ZRUQiLCJsaXZlRmVlZGJhY2siOnsicmVzb2x2ZWQiOjAsInVucmVzb2x2ZWQiOjAsInRvdGFsIjowLCJsaW5rIjoibWVldGluZy1pbnRlbGxpZ2VuY2Utd2MtZ2l0LWZlYXQtMzQtYWJjYjFjLXdheWVzLWJ0eWVzLXByb2plY3RzLnZlcmNlbC5hcHAifSwicm9vdERpcmVjdG9yeSI6ImZyb250ZW5kIn1dfQ==
The latest updates on your projects. Learn more about [Vercel for GitHub](https://vercel.link/github-learn-more).

| Project | Deployment | Actions | Updated (UTC) |
| :--- | :----- | :------ | :------ |
| [meeting-intelligence-wc](https://vercel.com/wayes-btyes-projects/meeting-intelligence-wc) | ![Ready](https://vercel.com/static/status/ready.svg) [Ready](https://vercel.com/wayes-btyes-projects/meeting-intelligence-wc/6tbumdpW1BvpsKuMVn1SxsMtLHJc) | [Preview](https://meeting-intelligence-wc-git-feat-34-abcb1c-wayes-btyes-projects.vercel.app), [Comment](https://vercel.live/open-feedback/meeting-intelligence-wc-git-feat-34-abcb1c-wayes-btyes-projects.vercel.app?via=pr-comment-feedback-link) | Feb 23, 2026 6:55am |

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) commented at [2026-02-21 22:04](https://github.com/wayes-btye/meeting-intelligence/pull/58#issuecomment-3939579112):

Branch rebased onto current main (was on old base from before Wave 3 + mypy fixes). All conflicts resolved, full test suite passing against current codebase. Force-pushed.

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) commented at [2026-02-23 06:55](https://github.com/wayes-btye/meeting-intelligence/pull/58#issuecomment-3943016104):

Addressed Codex P1 (ZIP bomb): added per-file (100 MB), total (200 MB), and file count (50) limits on uncompressed ZIP content before reading any member bytes. Raises 413 if limits exceeded.


-------------------------------------------------------------------------------



[Export of Github issue for [wayes-btye/meeting-intelligence](https://github.com/wayes-btye/meeting-intelligence). Generated on 2026.02.26 at 04:18:23.]
