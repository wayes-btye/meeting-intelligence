# [\#61 Issue](https://github.com/wayes-btye/meeting-intelligence/issues/61) `closed`: feat: meeting image summary via Nano Banana Pro (Gemini 3 Pro Image)

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) opened issue at [2026-02-23 04:51](https://github.com/wayes-btye/meeting-intelligence/issues/61):

## Goal

When viewing a meeting, a user can click **"Generate Visual Summary"** to produce an AI-generated image summarising the meeting — speakers, key topics, decisions, timeline. This is a manually triggered action (not auto-generated on upload) because it calls a paid API.

## Model

**Nano Banana Pro** — `gemini-3-pro-image-preview` (Gemini 3 Pro Image)
- Google's highest-quality image generation model with advanced reasoning
- Uses the existing `GOOGLE_API_KEY` in `.env` — no new key needed
- Returns base64 image bytes via `inline_data` in the response

## Backend

**New endpoint:** `POST /api/meetings/{id}/image-summary`

**1.** Fetch `raw_transcript` from Supabase for the given meeting ID.

**2.** Build a prompt:
```
Create a visual summary infographic for this meeting.
Include: speaker names and their participation level, key decisions made,
main topics discussed in order, and any action items.
Use a clean, professional style with clear sections and labels.

Transcript:
{transcript}
```

**3.** Call Gemini image API:
```python
import google.generativeai as genai
genai.configure(api_key=settings.google_api_key)
model = genai.GenerativeModel("gemini-3-pro-image-preview")
response = model.generate_content([prompt])
for part in response.parts:
    if part.inline_data is not None:
        # base64 image bytes available here
```

**4.** Return JSON:
```json
{
  "meeting_id": "...",
  "image_data": "<base64 string>",
  "mime_type": "image/png"
}
```

**5.** Graceful 501 if `GOOGLE_API_KEY` not configured.

## Frontend

In the meeting detail panel (or meetings list detail view):

**1.** Add a **"Generate Visual Summary"** button — only shown when meeting has a transcript.

**2.** On click: POST to `/api/meetings/{id}/image-summary` → show loading spinner → render `<img src="data:image/png;base64,..." />` in a card below the meeting details.

**3.** Button stays available to re-generate. Image is not persisted — regenerated on demand.

**4.** Error state if API call fails (e.g. key not set → show friendly message).

## What this is NOT

- Not auto-generated on upload (costs money per call)
- Not available as a batch operation on zip uploads
- Not the text-based structured summary (JSON cards) from the rejected PR 35 — this produces an actual image

## Acceptance Criteria

**1.** `POST /api/meetings/{id}/image-summary` returns base64 image data
**2.** Button visible in meeting detail view — hidden until meeting has transcript
**3.** Click → spinner → image rendered inline
**4.** Graceful 501 if `GOOGLE_API_KEY` absent
**5.** `pytest tests/ -m "not expensive"` — all pass
**6.** `ruff check` + `mypy src/` — clean
**7.** `npm run build` — clean

## Notes

- `GOOGLE_API_KEY` is already documented in `.env.example` (added in earlier work)
- The existing `google-generativeai` package is already in `pyproject.toml`
- PRD: F35 (supersedes closed issue 35)

#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) commented at [2026-02-23 05:28](https://github.com/wayes-btye/meeting-intelligence/issues/61#issuecomment-3942723615):

Implementation complete - PR #62 open for review.

Automated tests pass (120 tests, none expensive). Manual testing required to verify image generation via live Gemini API call.

Changes:
- New endpoint: POST /api/meetings/{id}/image-summary (src/api/routes/image_summary.py)
- Tries gemini-3-pro-image-preview (Nano Banana Pro) first, falls back to gemini-2.0-flash-exp with IMAGE modality config
- Graceful 501 when GOOGLE_API_KEY is absent
- Generate Visual Summary button added to meeting detail panel (frontend/app/meetings/page.tsx)
- 3 deterministic tests in tests/test_image_summary.py


-------------------------------------------------------------------------------



[Export of Github issue for [wayes-btye/meeting-intelligence](https://github.com/wayes-btye/meeting-intelligence). Generated on 2026.03.01 at 04:23:01.]
