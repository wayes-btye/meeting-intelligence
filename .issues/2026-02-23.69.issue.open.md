# [\#69 Issue](https://github.com/wayes-btye/meeting-intelligence/issues/69) `open`: feat: persistent chat history with conversation context
**Labels**: `enhancement`, `ui`, `post-mvp`


#### <img src="https://avatars.githubusercontent.com/u/151667361?v=4" width="50">[wayes-btye](https://github.com/wayes-btye) opened issue at [2026-02-23 11:36](https://github.com/wayes-btye/meeting-intelligence/issues/69):

## Current State

Each chat query is stateless — no history is maintained between turns. Follow-up questions ("what did she say next?" / "expand on that decision") have no context and are treated as fresh queries.

## Approach

**Backend — `POST /api/query` extension:**
- Add optional `conversation_id` and `history` to the request body
- Pass the last N turns as additional context in the Claude system prompt:
```python
# Inject conversation history into generation prompt
history_context = "\n".join([
    f"Q: {turn['question']}\nA: {turn['answer']}"
    for turn in history[-3:]  # last 3 turns
])
```
- Add `conversations` table: `(id, meeting_id, messages jsonb, created_at)`

**Frontend:**
- Scrollable chat panel with message history per session
- Conversation persisted in React state (not localStorage — private data)
- "New conversation" button clears history

## Design Notes

The RAG pipeline stays stateless — conversation history is injected as additional context, not retrieved. This is the correct approach: history provides conversational continuity; the vector index provides factual grounding.

**Token budget:** With 3-turn history + retrieved chunks + system prompt, we're well within Claude's context window for meeting transcripts of any reasonable length.

## Acceptance Criteria

- [ ] `POST /api/query` accepts optional `history` array
- [ ] Generation prompt includes conversation history when provided
- [ ] React chat UI maintains scrollable history within a session
- [ ] "New conversation" clears history
- [ ] Existing stateless query behaviour unchanged when `history` is empty




-------------------------------------------------------------------------------



[Export of Github issue for [wayes-btye/meeting-intelligence](https://github.com/wayes-btye/meeting-intelligence). Generated on 2026.02.28 at 03:55:48.]
